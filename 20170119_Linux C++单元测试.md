# Linux C++ 单元测试培训

很久没有做单元测试了，甚至可以说很久没有编码了。
来了这边之后，很多事儿貌似跟编码没有多大的关系了。
自己以后，还能不能做编码了呢？  `思考`

****

## Google Test

Google的Cpp的单元测试

****

### 下载和安装

* 下载
* 解压


1. 解压出Google test & Google mock文件夹

2. 建立工程的路径 eclipse配置

3. 把gtest源码和需要测试的项目的源码拷贝到工程目录下
其中gtest可以使用python脚本进行拷贝，工程的源码需要手动拷贝

4. 打开eclipse进行环境配置
主要是编译的变量和运行的环境变量


****

### 使用

* 断言的使用

1. assert宏 检查失败时，退出当前函数
2. expect宏 检查点失败时，继续往下运行 发现错误的时候不影响测试的进程，
继续往下进行





`举例`


c++ empty project  vs makefile project 

C++ 空工程的方式比较耗时，makefile 的方式就比较简单。


gtest 生成测试报告的话 需要修改配置 -gtest_output = XML:/测试报告路径


Gmock-gtest-all.cc 可以修改测试输出的颜色和具体信息



修改输出的格式 可以定制测试的结果



* 关于断言的宏



布尔型
数值型
字符串型
显示返回成功或者失败
异常检查 通过宏的定义对代码中跑出的异常进行设置



`动手`


_自己搭建C++单元测试和静态测试的开发环境_


`思考`

**如果对于多进程多次线程很多类的项目该如何做单元测试呢？**

* 参数化

C++需要传递的参数都可以通过gtest的设置进行传递


支持迭代器等


> 是否支持boost等库？


* 运行参数也可以在代码中进行测试







### Google Mock 插桩

A模块要调用B模块 B模块没有完成 则要用mock


![image](https://github.com/latermonk/blog/raw/master/img/gtest.jpg)
对类进行插桩



Makefile 类型的工程直接import 工程即可

### 相对简单的话 cppTest 更好些






-------












